/* =========================================
   1. GLOBAL RESET
   ========================================= */
#orc-widget-container {
    position: fixed !important;
    bottom: 20px !important;
    z-index: 2147483647 !important;
    padding: 0 !important; margin: 0 !important;
    background: transparent !important;
    width: auto !important; height: auto !important;
    box-sizing: border-box !important;
    line-height: 1.5 !important;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
    right: 20px !important; left: auto !important;
}
#orc-widget-container.orc-pos-right { right: 20px !important; left: auto !important; }
#orc-widget-container.orc-pos-left { left: 20px !important; right: auto !important; }

/* =========================================
   2. BUBBLE
   ========================================= */
#orc-chat-bubble {
    width: var(--orc-bubble-size, 60px) !important;
    height: var(--orc-bubble-size, 60px) !important;
    background: var(--orc-accent, #0073aa) !important;
    border-radius: 50% !important; border: none !important; cursor: pointer !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
    padding: 0 !important; margin: 0 !important;
    display: flex !important; align-items: center !important; justify-content: center !important;
}
#orc-chat-bubble svg { width: 50% !important; height: 50% !important; fill: #ffffff !important; display: block !important; }

/* =========================================
   3. CHAT WINDOW
   ========================================= */
#orc-chat-window {
    position: absolute !important; bottom: 80px !important;
    width: 350px !important; max-width: calc(100vw - 40px) !important;
    height: 500px !important; max-height: 80vh !important;
    background-color: var(--orc-bg, #ffffff) !important;
    border-radius: 12px !important; box-shadow: 0 5px 30px rgba(0,0,0,0.2) !important;
    border: 1px solid #e5e5e5 !important;
    display: flex !important; flex-direction: column !important; overflow: hidden !important;
    opacity: 0; visibility: hidden; transform: translateY(10px);
    transition: opacity 0.2s, transform 0.2s, visibility 0.2s !important;
}
#orc-chat-window.orc-open { opacity: 1 !important; visibility: visible !important; transform: translateY(0) !important; }
.orc-pos-right #orc-chat-window, #orc-widget-container:not(.orc-pos-left) #orc-chat-window { right: 0 !important; left: auto !important; }
.orc-pos-left #orc-chat-window { left: 0 !important; right: auto !important; }

/* =========================================
   4. HEADER
   ========================================= */
#orc-chat-header {
    background: var(--orc-accent, #0073aa) !important; color: #fff !important;
    padding: 15px !important; flex-shrink: 0 !important;
    display: flex !important; justify-content: space-between !important; align-items: center !important;
}
.orc-header-title { display: flex !important; align-items: center !important; gap: 10px !important; font-weight: bold !important; }
.orc-avatar-img { width: 30px !important; height: 30px !important; border-radius: 50% !important; object-fit: cover !important; border: 2px solid rgba(255,255,255,0.5) !important; }

/* Header Actions (New Chat & Close) */
.orc-header-actions { display: flex !important; gap: 15px !important; align-items: center !important; }
#orc-reset-btn, #orc-close-btn {
    background: transparent !important; border: none !important; color: #fff !important;
    font-size: 20px !important; cursor: pointer !important; padding: 0 !important;
    opacity: 0.8; transition: opacity 0.2s;
}
#orc-reset-btn:hover, #orc-close-btn:hover { opacity: 1; }
#orc-reset-btn { font-size: 18px !important; font-weight: bold; }

/* =========================================
   5. MESSAGES & INPUT
   ========================================= */
#orc-chat-messages {
    flex-grow: 1 !important; padding: 15px !important; overflow-y: auto !important;
    background: transparent !important; display: flex !important; flex-direction: column !important; gap: 10px !important;
}
.orc-message {
    max-width: 85% !important; padding: 10px 14px !important; border-radius: 12px !important;
    font-size: 14px !important; line-height: 1.4 !important; word-wrap: break-word !important;
    color: #333 !important;
}
.orc-user-msg { background: var(--orc-user-bg, #0073aa) !important; color: var(--orc-user-txt, #ffffff) !important; align-self: flex-end !important; }
.orc-bot-msg { background: var(--orc-bot-bg, #e5e5ea) !important; color: var(--orc-bot-txt, #333333) !important; align-self: flex-start !important; }

#orc-input-area {
    padding: 10px !important; background: var(--orc-bg, #ffffff) !important;
    border-top: 1px solid #eee !important; display: flex !important; gap: 8px !important; flex-shrink: 0 !important;
}
#orc-user-input {
    flex-grow: 1 !important; border: 1px solid #ddd !important; border-radius: 20px !important;
    padding: 8px 12px !important; color: #333 !important; background: #fff !important;
}
#orc-send-btn { background: transparent !important; color: var(--orc-accent, #0073aa) !important; border: none !important; font-weight: bold !important; cursor: pointer !important; }

#orc-typing { padding: 10px 15px !important; display: none !important; align-items: center !important; gap: 5px !important; background: transparent !important; }
#orc-typing.orc-active { display: flex !important; }
.orc-dot { width: 6px !important; height: 6px !important; background: #999 !important; border-radius: 50% !important; animation: orcBounce 1.4s infinite ease-in-out both !important; }
.orc-dot:nth-child(1) { animation-delay: -0.32s !important; }
.orc-dot:nth-child(2) { animation-delay: -0.16s !important; }
@keyframes orcBounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

/* =========================================
   6. LEAD FORM & DARK MODE
   ========================================= */
#orc-lead-form {
    display: none !important; position: absolute !important; top:0; left:0; width:100%; height:100%;
    background: var(--orc-bg, #ffffff) !important; z-index: 100 !important; padding: 20px !important;
    flex-direction: column !important; justify-content: center !important;
}
#orc-lead-form.orc-visible { display: flex !important; }
#orc-lead-form p { margin: 0 0 15px 0 !important; color: #333 !important; text-align: center !important; font-weight: bold !important; }
#orc-lead-form input { width: 100% !important; padding: 10px !important; margin-bottom: 10px !important; border: 1px solid #ccc !important; border-radius: 5px !important; background: #fff !important; color: #333 !important; }
#orc-lead-submit { width: 100% !important; padding: 12px !important; background: var(--orc-accent, #0073aa) !important; color: #fff !important; border: none !important; border-radius: 5px !important; cursor: pointer !important; font-weight: bold !important; }

.orc-dark #orc-chat-window { background: #222 !important; border-color: #444 !important; }
.orc-dark #orc-chat-messages { background: #111 !important; }
.orc-dark #orc-lead-form { background: #222 !important; }
.orc-dark #orc-lead-form p { color: #fff !important; }
.orc-dark #orc-lead-form input { background: #333 !important; border-color: #555 !important; color: #fff !important; }
.orc-dark .orc-bot-msg { background: #333 !important; color: #eee !important; }
.orc-dark #orc-input-area { background: #222 !important; border-color: #444 !important; }
.orc-dark #orc-user-input { background: #333 !important; color: #fff !important; border-color: #555 !important; }